<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Focus History</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ========== HEADER ========== -->
  <header class="app-header">
    <h1>FOCUS HISTORY</h1>
    <button class="btn-start" id="btnStart">ابدأ</button>
  </header>

  <!-- ========== MAIN 3-PANEL LAYOUT ========== -->
  <div class="app-layout">

      <!-- HISTORY PANEL -->
      <div class="card card-history">
        <div id="app"></div>
      </div>

      <!-- DDX PANEL -->
      <div class="card card-ddx">
        <div id="ddxContainer"></div>
      </div>

      <!-- REASONING PANEL -->
      <div class="card card-reason">
        <div id="reasonContainer"></div>
      </div>

  </div>

  <!-- ========== CASE SUMMARY MODAL ========== -->
  <div id="caseModal" class="modal hidden">
    <div class="modal-content">
      <span id="caseModalClose" class="modal-close">×</span>
      <div id="caseModalContent"></div>

      <button id="caseModalCopy" class="btn-copy">Copy Case</button>
      <button id="caseModalClose2" class="btn-close">Close</button>
    </div>
  </div>

  <!-- ========== SCRIPT ORDER (IMPORTANT) ========== -->

  <!-- ID helpers -->
  <script src="chest-ids.js"></script>

  <!-- DATA FILES -->
  <script src="main-data.js"></script>
  <script src="chest-data-main.js"></script>
  <script src="chest-data-personal.js"></script>
  <script src="chest-data-hpi.js"></script>
  <script src="chest-data-ros.js"></script>
  <script src="chest-data-background.js"></script>
  <script src="chest-data-peds.js"></script>
  <script src="chest-data-dx.js"></script>

  <!-- ENGINE ORDER -->
  <script src="chest-engine-config.js"></script>
  <script src="chest-engine-state.js"></script>
  <script src="chest-engine-core.js"></script>
  <script src="chest-engine-recompute.js"></script>
  <script src="chest-engine-output.js"></script>

  <!-- UI LAYER -->
  <script src="chest-ui-core.js"></script>
  <script src="chest-ui-ddx.js"></script>
  <script src="chest-ui-reasoning.js"></script>
  <script src="chest-ui-case-modal.js"></script>

  <!-- ========== START APP (FULL BOOT) ========== -->
  <script>
    document.getElementById("btnStart").onclick = function () {
      CHEST_ENGINE.init();

      if (window.CHEST_UI_DDX) CHEST_UI_DDX.render();
      if (window.CHEST_UI_REASONING) CHEST_UI_REASONING.render();
    };
  </script>

</body>
</html>